<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DronaHQ AI Agent Workshop</title>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --bg-body: #f8fafc;
            --bg-sidebar: #ffffff;
            --text-main: #334155;
            --text-heading: #0f172a;
            --border: #e2e8f0;
            --linkedin: #0077b5;
            --success-color: #10b981;
            --secondary-text: #9ca3af;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg-body); color: var(--text-main); margin: 0; padding: 0; display: flex; min-height: 100vh; }

        /* --- SIDEBAR NAVIGATION --- */
        .sidebar {
            width: 280px; background: var(--bg-sidebar); border-right: 1px solid var(--border);
            padding: 2rem 1.5rem; position: fixed; height: 100vh; overflow-y: auto; top: 0; left: 0;
            display: flex; flex-direction: column; z-index: 10;
        }
        
        .logo { max-width: 160px; height: auto; margin-bottom: 2rem; }

        .nav-link {
            display: block; padding: 0.75rem 1rem; color: #64748b; text-decoration: none; border-radius: 6px;
            margin-bottom: 0.25rem; font-size: 0.95rem; font-weight: 500; transition: all 0.2s;
        }
        .nav-link:hover { background: #eff6ff; color: var(--primary); }
        .nav-link.active { background: #eff6ff; color: var(--primary); font-weight: 700; }

        /* --- MAIN CONTENT --- */
        .main-content {
            margin-left: 280px; flex: 1; padding: 3rem 4rem; max-width: 1000px;
        }

        /* Mobile Logo */
        .mobile-logo { display: none; max-width: 140px; margin-bottom: 1.5rem; }

        section { margin-bottom: 4rem; scroll-margin-top: 2rem; }
        h1 { font-size: 2.5rem; color: var(--text-heading); margin-bottom: 0.5rem; margin-top: 0; }
        h2 { font-size: 1.75rem; color: var(--text-heading); margin-bottom: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
        h3 { color: var(--text-heading); margin-top: 1.5rem; }

        /* Cards */
        .access-card {
            background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%); color: white;
            padding: 2rem; border-radius: 12px; text-align: center; margin-bottom: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .access-btn {
            background: white; color: var(--primary); border: none; padding: 1rem 2rem;
            font-size: 1rem; font-weight: 700; border-radius: 50px; cursor: pointer;
            text-decoration: none; display: inline-block; margin-top: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s;
        }
        .access-btn:hover { transform: translateY(-2px); }

        /* Credentials Box Styles */
        .cred-box-locked {
            margin-top: 1.5rem; background: rgba(255,255,255,0.1); padding: 1rem; 
            border-radius: 8px; border: 1px solid rgba(255,255,255,0.3);
        }
        .cred-box-unlocked {
            margin-top: 1.5rem; background: #10b981; padding: 1rem; 
            border-radius: 8px; border: 1px solid #059669; animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; }
        .card { background: white; padding: 1.5rem; border-radius: 8px; border: 1px solid var(--border); box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .card strong { color: var(--primary); display: block; margin-bottom: 0.5rem; font-size: 1.1rem; }

        /* Agent Builder Area */
        .tab-container { background: white; border: 1px solid var(--border); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .tabs { display: flex; background: #f1f5f9; border-bottom: 1px solid var(--border); overflow-x: auto; }
        .tab-btn {
            padding: 1rem 1.5rem; border: none; background: none; cursor: pointer; font-weight: 600; color: #64748b; border-bottom: 3px solid transparent; transition: all 0.2s; white-space: nowrap;
        }
        .tab-btn:hover { background: #e2e8f0; }
        .tab-btn.active { background: white; color: var(--primary); border-bottom-color: var(--primary); }
        .tab-content-area { padding: 2rem; }
        
        .code-block {
            background: #1e293b; color: #e2e8f0; padding: 1.5rem; border-radius: 8px;
            font-family: 'Courier New', monospace; white-space: pre-wrap; position: relative;
            margin: 1rem 0; font-size: 0.9rem; line-height: 1.6; border: 1px solid #334155;
        }
        .copy-btn {
            position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.15);
            color: white; border: none; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8rem;
        }
        .copy-btn:hover { background: rgba(255,255,255,0.3); }

        /* Download Link Style */
        .file-download-card {
            display: flex; align-items: center; justify-content: space-between;
            background: #f1f5f9; border: 1px solid #cbd5e1;
            padding: 0.75rem 1rem; border-radius: 6px; margin-top: 0.5rem;
            transition: all 0.2s;
        }
        .file-info { display: flex; align-items: center; gap: 8px; font-weight: 500; color: #334155; }
        .download-btn-sm {
            background: white; border: 1px solid #bfdbfe; color: var(--primary);
            padding: 0.4rem 0.8rem; border-radius: 4px; font-size: 0.85rem; font-weight: 600;
            text-decoration: none; display: flex; align-items: center; gap: 5px; cursor: pointer;
        }
        .download-btn-sm:hover { background: #eff6ff; border-color: var(--primary); }

        /* About & Profile Styles */
        .about-grid { display: grid; grid-template-columns: 1fr; gap: 2rem; }
        @media (min-width: 768px) { .about-grid { grid-template-columns: 200px 1fr; } }
        
        .profile-img { width: 100%; max-width: 200px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .bio-content h3 { margin-top: 0; color: var(--primary); font-size: 1.5rem; }
        .bio-content p { line-height: 1.7; color: #475569; font-size: 1.05rem; }

        .company-box { background: white; border: 1px solid var(--border); border-radius: 12px; padding: 2rem; display: flex; align-items: flex-start; gap: 2rem; flex-wrap: wrap; }
        .company-logo-lg { width: 180px; height: auto; }

        /* --- BETA FORM STYLES --- */
        .beta-form-container { 
            background: #111827;
            color: white; 
            padding: 2.5rem; 
            border-radius: 12px; 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2); 
            border: 1px solid #374151;
        }
        
        .beta-form-container h3 { color: #60a5fa; margin-top: 0; font-size: 1.5rem; }

        .note-box {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            line-height: 1.5;
            color: #d1d5db;
        }

        .beta-form input[type="text"], 
        .beta-form input[type="email"] {
            width: 100%;
            padding: 0.875rem;
            margin-bottom: 1rem;
            border: 1px solid #374151;
            border-radius: 6px;
            background: #1f2937;
            color: white;
            font-size: 1rem;
        }
        
        .beta-form input:focus {
            outline: none; border-color: #60a5fa; ring: 2px solid #60a5fa;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            color: #d1d5db;
        }
        
        .checkbox-wrapper input { margin-top: 0.25rem; }

        .cta-button {
            width: 100%;
            background: #10b981;
            color: white;
            border: none;
            padding: 1rem;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .cta-button:hover:not(:disabled) { background: #059669; }
        .cta-button:disabled { background: #6b7280; cursor: not-allowed; }

        /* LinkedIn Share */
        .linkedin-box { text-align: center; background: #f0f9ff; border: 1px solid #bae6fd; padding: 2rem; border-radius: 12px; margin-top: 2rem; }
        .linkedin-btn { background: var(--linkedin); color: white; padding: 0.75rem 1.5rem; border-radius: 50px; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; transition: opacity 0.2s; }

        /* --- POPUP MODAL STYLES --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center;
            z-index: 1000; backdrop-filter: blur(4px);
        }
        .modal-content {
            background: white; width: 90%; max-width: 500px; padding: 2.5rem;
            border-radius: 16px; text-align: center; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            position: relative; animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .modal-title { font-size: 1.8rem; margin: 0 0 1rem 0; color: #111827; }
        .modal-close { position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6b7280; }
        .modal-cred-box { background: #f3f4f6; padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0; border: 1px dashed #9ca3af; }
        .modal-btn { background: var(--primary); color: white; border: none; padding: 0.75rem 2rem; border-radius: 50px; font-weight: 700; cursor: pointer; font-size: 1rem; }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 1.5rem; }
            .mobile-logo { display: block; }
        }
    </style>
</head>
<body>

    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <div style="font-size: 3rem; margin-bottom: 1rem;">üéâ</div>
            <h2 class="modal-title">Access Granted!</h2>
            <p style="color: #4b5563; font-size: 1.1rem;">You have successfully unlocked the workshop resources.</p>
            
            <div class="modal-cred-box">
                <p style="margin: 0 0 0.5rem 0; color: #6b7280; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 700;">Your Credentials</p>
                <div style="font-family: monospace; font-size: 1.2rem; color: #1f2937;">
                    User: <strong style="color: var(--primary);">workshop@dronahq.com</strong><br>
                    Pass: <strong style="color: var(--primary);">qwerty</strong>
                </div>
            </div>

            <button class="modal-btn" onclick="closeModal()">Start Building üöÄ</button>
        </div>
    </div>

    <nav class="sidebar">
        <img src="https://www.dronahq.com/wp-content/uploads/2024/11/DronaHQ-Logo_Dark-1.png" alt="DronaHQ Logo" class="logo">
        <a href="#welcome" class="nav-link">1. Welcome & Access</a>
        <a href="#about-me" class="nav-link">2. About Instructor</a>
        <a href="#about-dronahq" class="nav-link">3. About DronaHQ</a>
        <a href="#concepts" class="nav-link">4. Core Concepts</a>
        <a href="#build-guide" class="nav-link">5. Build Guide</a>
        <a href="#agent-templates" class="nav-link">6. Agent Templates</a>
        <a href="#testing" class="nav-link">7. Testing & Publish</a>
        <a href="#next-steps" class="nav-link">8. Claim Account</a>
        <a href="#share" class="nav-link">9. Share Certificate</a>
    </nav>

    <main class="main-content">
        
        <section id="welcome">
            <img src="https://www.dronahq.com/wp-content/uploads/2024/11/DronaHQ-Logo_Dark-1.png" alt="DronaHQ Logo" class="mobile-logo">
            <h1>Building Agentic AI</h1>
            <p style="font-size: 1.1rem; color: #64748b;">Welcome to the workshop. This page contains all the resources, prompts, and links you need.</p>

            <div class="access-card">
                <h2 style="color: white; border: none; margin: 0; font-size: 1.5rem;">Step 1: Access Agent Builder</h2>
                <p>Click the button below to launch the DronaHQ environment.</p>
                <a href="https://agents.dronahq.com/" target="_blank" class="access-btn">üëâ Launch Builder</a>
                
                <div id="credentials-container" class="cred-box-locked">
                    <div id="credentials-lock">
                        <span style="font-size: 1.5rem;">üîí</span><br>
                        <span style="font-size: 0.9rem; opacity: 0.9;">Credentials Locked</span><br>
                        <a href="#next-steps" style="color: white; text-decoration: underline; font-size: 0.9rem;">Claim your account below to unlock</a>
                    </div>
                    <div id="credentials-unlocked" style="display: none; font-family: monospace;">
                        <div style="font-weight: 700; margin-bottom: 0.5rem; text-transform: uppercase; font-size: 0.85rem; opacity: 0.8;">Workshop Credentials</div>
                        User: <strong>workshop@dronahq.com</strong><br>
                        Pass: <strong>qwerty</strong>
                    </div>
                </div>
            </div>
        </section>

        <section id="about-me"></section>
        <section id="about-dronahq"></section>
        <section id="concepts">
            <h2>4. Core Concepts</h2>
            <p>Before we build, understanding the anatomy of an agent is crucial.</p>
            <div class="grid">
                <div class="card"><strong>1. Instructions</strong>The "System Prompt". Defines personality, role, and rules.</div>
                <div class="card"><strong>2. Tools</strong>Capabilities (Gmail, Sheets, Web Search) to perform actions.</div>
                <div class="card"><strong>3. Knowledge Base</strong>Static files (PDFs, Docs) the agent reads for context.</div>
                <div class="card"><strong>4. Guardrails</strong>Safety protocols (e.g., "Do not discuss competitors").</div>
                <div class="card"><strong>5. Triggers</strong>Events that wake the agent (Email, Chat, Webhook).</div>
                <div class="card"><strong>6. LLM</strong>The brain (GPT-4o, Claude) processing logic.</div>
            </div>
        </section>

        <section id="build-guide">
            <h2>5. Step-by-Step Build</h2>
            <div style="border-left: 4px solid var(--primary); padding-left: 1.5rem; background: #fff; padding: 1.5rem; border-radius: 0 8px 8px 0;">
                <h3 style="margin-top: 0;">Step 1: Create</h3>
                <p>Click <strong>+ Create New Agent</strong> on the dashboard.</p>
                <h3>Step 2: Rename</h3>
                <p>Name your agent based on its function (e.g., "Recruiter Bot V1").</p>
                <h3>Step 3: Configuration</h3>
                <p>This is where we add the "Brain". Use the templates in the section below.</p>
            </div>
        </section>

        <section id="agent-templates">
            <h2>6. Agent Templates</h2>
            <div class="tab-container">
                <div class="tabs" id="tab-header"></div>
                <div class="tab-content-area" id="tab-body"></div>
            </div>
        </section>

        <section id="testing">
            <h2>7. Test & Publish</h2>
            <h3>The Playground</h3>
            <p>Locate the <strong>Test Panel</strong>. Simulate a user conversation.</p>
            <ul style="background: white; padding: 1.5rem 2.5rem; border-radius: 8px; border: 1px solid var(--border);">
                <li><strong>Happy Path:</strong> Ask questions the agent <em>should</em> know.</li>
                <li><strong>Edge Case:</strong> Ask questions unrelated to see if Guardrails work.</li>
            </ul>
        </section>

        <section id="next-steps">
            <h2>8. Claim Your Account</h2>
            
            <div class="beta-form-container">
                <h3 style="margin-bottom: 1rem;">Unlock Your Credentials</h3>
                <p style="color: var(--secondary-text);">Please verify your business email to receive the workshop credentials and your $10 AI credits.</p>
                
                <div class="note-box">
                    <p style="margin: 0;">
                        <strong>Why controlled access?</strong><br>
                        We are providing <strong>$10 in free AI credits</strong> to testers. To ensure these go to serious business use cases (and avoid personal 'planner app' projects), we manually verify requests via business email.
                    </p>
                </div>

                <form id="betaForm" class="beta-form">
                    <input type="text" name="businessName" placeholder="Business Name" required>
                    <input type="email" name="email" placeholder="Business Email Address" required>
                    
                    <div class="checkbox-wrapper">
                        <input type="checkbox" name="mailingList" id="mailingList">
                        <label for="mailingList">We have an aggressive roadmap. Keep me posted on updates!</label>
                    </div>

                    <div class="cf-turnstile" data-sitekey="0x4AAAAAACGumSDn6kRgf5HC" data-theme="dark"></div>
                    
                    <button type="submit" class="cta-button" style="margin-top: 0.5rem;">Verify & Unlock Access</button>
                </form>
            </div>
        </section>

        <section id="share">
            <h2>9. Share Your Achievement</h2>
            <div class="linkedin-box">
                <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">Tell your professional network you are now an Agentic AI Builder!</p>
                <button onclick="shareLinkedIn()" class="linkedin-btn" style="cursor: pointer; border:none; font-size:1rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                    Post to LinkedIn
                </button>
            </div>
        </section>

    </main>

    <script>
        // --- PERSISTENCE CHECK ---
        // Check if user has already unlocked credentials in the past
        document.addEventListener('DOMContentLoaded', function() {
            if(localStorage.getItem('dhq_workshop_unlocked') === 'true') {
                unlockHeaderUI();
                // We don't show the modal on reload, just unlock the header
            }
        });

        // --- EMBEDDED DATA ---
        const agentData = [
            {
                id: "recruiter",
                name: "üßë‚Äçüíº Recruiter Agent",
                description: "Screens candidate text/resumes and drafts outreach emails automatically.",
                instructions: `You are an expert Technical Recruiter. Your goal is to screen candidates and schedule interviews.\n\n1. When you receive a candidate resume text, analyze it against the Job Description.\n2. If they are a good match (>80%), draft a polite email inviting them to an interview.\n3. If they are not a match, draft a polite rejection email offering to keep their resume on file.\n4. Always maintain a professional, encouraging tone.`,
                tools: ["Gmail (Send Email)", "Google Sheets (Log Candidate)"],
                kb: "Job_Description_2026.pdf",
                fileContent: "JOB DESCRIPTION: SENIOR SOFTWARE ENGINEER\n\nResponsibilities:\n- Build scalable APIs.\n- Mentor junior devs.\n\nRequirements:\n- 5+ years in Python/Node.js.\n- Experience with AWS."
            },
            {
                id: "hr",
                name: "ü§ù HR Generalist",
                description: "Answering employee policy questions based on the handbook.",
                instructions: `You are "PeopleOp," a helpful HR Generalist Assistant.\n\nYour goal is to answer employee questions regarding company policy.\n1. Always consult the Knowledge Base (Employee Handbook) before answering.\n2. If the answer is not in the handbook, direct them to email humanresources@company.com.\n3. Never make up policy rules.\n4. Be empathetic and concise.`,
                tools: ["None (Pure Chat)", "Slack (Optional)"],
                kb: "Employee_Handbook_2026.pdf",
                fileContent: "EMPLOYEE HANDBOOK 2026\n\n1. Leave Policy: You get 20 days PTO.\n2. Remote Work: 3 days in office, 2 days remote.\n3. Benefits: Health, Dental, Vision included."
            },
            {
                id: "learning",
                name: "üìö L&D Agent",
                description: "Suggests courses and builds study plans based on skill gaps.",
                instructions: `You are an L&D Course Recommender.\n\n1. Ask the user what skill they want to improve (e.g., Leadership, Python).\n2. Ask for their current proficiency level (Beginner, Intermediate).\n3. Based on their answer, recommend 3 courses from the Course Catalog in the Knowledge Base.\n4. Create a simple weekly study plan for them.`,
                tools: ["Web Search (Bing/Google)"],
                kb: "Internal_Course_Catalog.csv",
                fileContent: "Course Name,Level,Link\nPython Basics,Beginner,https://lms.company.com/python101\nAdvanced Leadership,Expert,https://lms.company.com/lead\nPublic Speaking,Intermediate,https://lms.company.com/speak"
            }
        ];

        const workshopMeta = {
            dronahq: {
                title: "3. About DronaHQ",
                logoUrl: "https://www.dronahq.com/wp-content/uploads/2024/11/DronaHQ-Logo_Dark-1.png",
                website: "https://www.dronahq.com",
                description: `DronaHQ is a low-code platform that helps engineering teams build internal tools, dashboards, and admin panels 10x faster. \n\nWith the new <strong>Agentic AI</strong> capabilities, DronaHQ allows you to build autonomous agents that can securely access your internal databases, APIs, and documents to perform complex tasks without human intervention.`
            },
            instructor: {
                title: "2. About Your Instructor",
                name: "Instructor Name", 
                role: "AI Consultant & Workshop Lead",
                imageUrl: "https://placehold.co/400x400?text=Profile+Pic",
                bio: `Hello! I am a passionate advocate for Generative AI and automation. My mission is to help HR and Operations professionals leverage the power of Agentic workflows to reduce manual toil and increase strategic impact.\n\nIf you enjoyed this workshop, feel free to connect with me on LinkedIn or ask me any questions about the DronaHQ platform.`
            }
        };

        // --- RENDER LOGIC: AGENT TABS ---
        let activeIndex = 0;
        const tabHeader = document.getElementById('tab-header');
        const tabBody = document.getElementById('tab-body');

        function renderTabs() {
            if(!agentData || agentData.length === 0) return;

            tabHeader.innerHTML = '';
            tabBody.innerHTML = '';

            agentData.forEach((agent, index) => {
                const btn = document.createElement('button');
                btn.className = `tab-btn ${index === activeIndex ? 'active' : ''}`;
                btn.innerText = agent.name;
                btn.onclick = () => { activeIndex = index; renderTabs(); };
                tabHeader.appendChild(btn);
            });

            const agent = agentData[activeIndex];
            const contentHTML = `
                <h3 style="margin-top:0">${agent.name}</h3>
                <p style="color:#64748b; font-style:italic;">${agent.description}</p>
                <h4>A) System Instructions</h4>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyInstructions(${activeIndex})">Copy</button>
                    <span id="instruction-${activeIndex}">${agent.instructions}</span>
                </div>
                <div style="display:flex; gap: 2rem; flex-wrap:wrap;">
                    <div><h4>B) Tools Needed</h4><ul>${agent.tools.map(t => `<li>${t}</li>`).join('')}</ul></div>
                    <div>
                        <h4>C) Knowledge Base</h4>
                        <div class="file-download-card">
                            <div class="file-info"><span>üìÑ</span><span>${agent.kb}</span></div>
                            <button class="download-btn-sm" onclick="downloadFile(${activeIndex}, event)">Download File</button>
                        </div>
                    </div>
                </div>
            `;
            tabBody.innerHTML = contentHTML;
        }

        // --- RENDER LOGIC: ABOUT SECTIONS ---
        function renderAboutSections() {
            const companySection = document.getElementById('about-dronahq');
            const coData = workshopMeta.dronahq;
            companySection.innerHTML = `
                <h2>${coData.title}</h2>
                <div class="company-box">
                    <img src="${coData.logoUrl}" alt="Company Logo" class="company-logo-lg">
                    <div>
                        <p style="font-size: 1.05rem; line-height: 1.6;">${coData.description}</p>
                        <a href="${coData.website}" target="_blank" style="color: var(--primary); font-weight: 600; text-decoration: none;">Visit Website &rarr;</a>
                    </div>
                </div>
            `;
            const meSection = document.getElementById('about-me');
            const meData = workshopMeta.instructor;
            meSection.innerHTML = `
                <h2>${meData.title}</h2>
                <div class="about-grid">
                    <div><img src="${meData.imageUrl}" alt="${meData.name}" class="profile-img"></div>
                    <div class="bio-content">
                        <h3>${meData.name} <span style="font-size:0.9rem; color:#64748b; font-weight:400; display:block;">${meData.role}</span></h3>
                        <p>${meData.bio}</p>
                    </div>
                </div>
            `;
        }

        // --- UI UTILS ---
        function copyInstructions(index) {
            const text = agentData[index].instructions;
            navigator.clipboard.writeText(text).then(() => alert("Instructions copied!"));
        }

        function downloadFile(index, event) {
            event.preventDefault();
            const agent = agentData[index];
            const content = agent.fileContent || "Sample content for " + agent.kb;
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
            element.setAttribute('download', agent.kb);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        function shareLinkedIn() {
            const postText = "Just wrapped up an incredible workshop on Agentic AI! üöÄ I successfully built my first AI Agent capable of orchestrating complex workflows. Excited to explore more productivity hacks on my new DronaHQ account. The future of work is here. ü§ñ‚ú® \n\n#DronaHQ #AgenticAI #AIWorkshop #FutureOfWork #HRTech";
            const url = `https://www.linkedin.com/feed/?shareActive=true&text=${encodeURIComponent(postText)}`;
            window.open(url, '_blank');
        }

        // --- UNLOCKING LOGIC ---
        function unlockHeaderUI() {
            // Unlocks the header section specifically
            const container = document.getElementById('credentials-container');
            container.classList.remove('cred-box-locked');
            container.classList.add('cred-box-unlocked');
            document.getElementById('credentials-lock').style.display = 'none';
            document.getElementById('credentials-unlocked').style.display = 'block';
        }

        function showModal() {
            document.getElementById('successModal').style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- FORM SUBMISSION ---
        const form = document.getElementById('betaForm');
        
        if (form) {
            const submitBtn = form.querySelector('button[type="submit"]');

            form.addEventListener('submit', function(e) {
                e.preventDefault(); 
                
                // Get values
                const businessNameInput = form.querySelector('input[name="businessName"]');
                const emailInput = form.querySelector('input[name="email"]');
                const mailingListInput = form.querySelector('input[name="mailingList"]');
                
                const businessName = businessNameInput.value.trim();
                const email = emailInput.value.trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                const joinMailingList = mailingListInput.checked;

                // STRICT VALIDATION: If these fail, the code stops here. API is NEVER called.
                if (!businessName) {
                    alert("Please enter your Business Name.");
                    return;
                }

                if (!email || !emailRegex.test(email)) {
                    alert("Please enter a valid email address.");
                    return;
                }

                // --- CAPTCHA CHECK ---
                let token = null;
                if (typeof turnstile !== 'undefined') {
                    try { token = turnstile.getResponse(); } catch (err) { console.warn("Turnstile warning:", err); }
                }

                // Loading State
                const originalBtnText = submitBtn.innerText;
                submitBtn.innerText = "Verifying...";
                submitBtn.disabled = true;

                // Post to DronaHQ
                const payload = {
                    business_name: businessName,
                    email: email,
                    captcha_token: token || "bypass_mode",
                    mailing_list: joinMailingList
                };

                fetch('https://automations.dronahq.com/webhook/693fcf23b6619f7471dd8876', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                })
                .then(async (response) => {
                    const resJson = await response.json(); 
                    
                    if (response.ok) {
                        // Check Response Logic
                        if (resJson.valid_email === "valid") {
                            // 1. Persist State (Cookie/Localstorage replacement)
                            localStorage.setItem('dhq_workshop_unlocked', 'true');

                            // 2. Unlock UI immediately
                            unlockHeaderUI();
                            
                            // 3. Show Popup
                            showModal();

                            // 4. Update Form UI to success state
                            form.innerHTML = `
                                <div style="padding: 2rem 0; text-align: center;">
                                    <span style="font-size: 3rem;">üéâ</span>
                                    <p style="color: var(--success-color); font-weight: bold; font-size: 1.5rem; margin-top: 1rem;">Verification Successful!</p>
                                    <p style="color: #9ca3af; font-size: 1.1rem;">You have unlocked the workshop credentials.</p>
                                </div>
                            `;

                        } else {
                            // Email received but not validated as eligible
                             form.innerHTML = `
                                <div style="padding: 2rem 0; text-align: center;">
                                    <span style="font-size: 3rem;">‚è≥</span>
                                    <p style="color: #60a5fa; font-weight: bold; font-size: 1.5rem; margin-top: 1rem;">Request Received</p>
                                    <p style="color: #9ca3af; font-size: 1.1rem;">We are reviewing your request for <strong>${email}</strong>.<br>If eligible, credentials will be emailed shortly.</p>
                                </div>
                            `;
                        }
                    } else {
                        throw new Error('Network response was not ok');
                    }
                })
                .catch(error => {
                    console.error('Network Error:', error);
                    alert("Something went wrong. Please try again.");
                    submitBtn.innerText = originalBtnText;
                    submitBtn.disabled = false;
                    if (typeof turnstile !== 'undefined') turnstile.reset();
                });
            });
        }

        // Initialize
        renderTabs();
        renderAboutSections();
    </script>
</body>
</html>
